---
import Boton from './Boton.astro'
import Container from './Container.astro'
import { dataNewsJson } from '../pages/api/getNews'
interface NewsItem {
  title: string
  description: string
  url: string
  image_url: string
  published_at: string
  source: string
}

// const resNews = await fetch('http://localhost:4321/api/getNews.json')
// const dataNews: NewsItem[] = await resNews.json()
---

<main class="flex items-center my-5 mx-auto">
  <Container>
    <div class="flex flex-col gap-5">
      <section>
        <div>
          <h2>¿Qué es un técnico de sistemas?</h2>
          <p class="mt-2 mb-5 lg:mb-15">
            El técnico de sistemas es aquella persona encargada de la
            instalación, configuración y mantenimiento de los sistemas
            informático, equipo y redes de telecomunicación. Su función
            principal es asegurar la integración y el correcto funcionamiento de
            todos los sistemas tecnológicos en la empresa.
          </p>
          <Boton href="/" text="Leer más..." />
        </div>
      </section>
      <h3 class="text-lg text-white font-extrabold text-center">
        Ultimas noticias
      </h3>
      <section>
        {
          dataNewsJson.map((item: NewsItem) => {
            return (
              <article>
                <a
                  href={item.url}
                  target="_blank"
                  class="flex flex-col justify-between items-center"
                >
                  <img
                    src={item.image_url}
                    alt={item.title}
                    class="object-cover h-full"
                  />
                  <div class="flex flex-col min-h-full ">
                    <h4 class="text-white text-base font-bold">{item.title}</h4>
                    <div class=" flex flex-1">
                      <p class="mt-2">{item.description}</p>
                    </div>
                    <p class="flex justify-evenly my-2">
                      <span class="text-xs">
                        {item.published_at.slice(0, 10)}
                      </span>
                      <span class="text-xs">{item.source}</span>
                    </p>
                  </div>
                </a>
              </article>
            )
          })
        }
      </section>
    </div>
  </Container>
</main>

<style>
  main section:first-child {
    background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.5),
        rgba(226, 223, 223, 0)
      ),
      url('/images/tecnico sistemas.jpg');

    border-radius: 20px;
    background-position: center;
    background-size: cover;
    aspect-ratio: 17 / 9;
    background-repeat: no-repeat;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding-inline: 32px;
    overflow: hidden;
  }

  section > div h2 {
    color: #fff;
    font-weight: 700;
    font-size: 40px;
  }

  section > div p {
    color: var(--letter);
    font-weight: 400;
    font-size: 18px;
  }

  main section:last-child {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    padding-inline: 16px;
  }

  main article {
    display: flex;
    flex-direction: column;
    border-radius: 10px;
    height: fit-content;
    width: 100%;
    /*overflow: hidden;*/
  }

  main article img {
    width: 100%;
    height: 150px;
    object-fit: cover;
  }

  main article div {
    padding: 10px 0;
  }

  main article div p {
    color: var(--letter);
    font-weight: 400;
    font-size: 13px;
  }

  @media (max-width: 768px) {
    main section:first-child {
      aspect-ratio: unset;
      padding: 16px 20px;
    }
    section > div h2 {
      color: #fff;
      font-weight: 700;
      font-size: 16px;
    }
    section > div p {
      font-size: 12px;
    }
  }
</style>
